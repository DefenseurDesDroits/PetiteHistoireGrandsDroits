!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var i=class{constructor(e,t,r={}){if(!e.length)throw new Error("No words provided");this.attempts=0,this.gridGrowths=0,this.domElem=t,this.allOrientations=["horizontal","horizontalBack","vertical","verticalUp","diagonal","diagonalUp","diagonalBack","diagonalUpBack"],this.orientations=r.orientations||allOrientations,this.wordList=e.slice(0).sort();let i=this.wordList[0].length;this.opts={lang:r.lang||"EN",height:r.height||i,width:r.width||i,orientations:this.orientations,fillBlanks:void 0===r.fillBlanks||r.fillBlanks,allowExtraBlanks:void 0===r.allowExtraBlanks||r.allowExtraBlanks,maxAttempts:r.maxAttempts||3,maxGridGrowth:void 0!==r.maxGridGrowth?r.maxGridGrowth:10,preferOverlap:void 0===r.preferOverlap||r.preferOverlap,debug:void 0!==r.debug&&r.debug},this.lettersSet=this.setLetters(this.opts.lang),this.startSquare=null,this.lastSquare=null,this.selectedSquares=[],this.curWord="",this.curOrientation=null,this.finalPuzzle=this.newPuzzle(),this.drawPuzzle(),this.setEventHandlers()}compOrientations(e,t,r,i){switch(e){case"horizontal":return{x:t+i,y:r};case"horizontalBack":return{x:t-i,y:r};case"vertical":return{x:t,y:r+i};case"verticalUp":return{x:t,y:r-i};case"diagonal":return{x:t+i,y:r+i};case"diagonalBack":return{x:t-i,y:r+i};case"diagonalUp":return{x:t+i,y:r-i};case"diagonalUpBack":return{x:t-i,y:r-i}}}checkOrientations(e,t,r,i,n,s){switch(e){case"horizontal":return n>=t+s;case"horizontalBack":return t+1>=s;case"vertical":return i>=r+s;case"verticalUp":return r+1>=s;case"diagonal":return n>=t+s&&i>=r+s;case"diagonalBack":return t+1>=s&&i>=r+s;case"diagonalUp":return n>=t+s&&r+1>=s;case"diagonalUpBack":return t+1>=s&&r+1>=s}}skipOrientations(e,t,r,i){switch(e){case"horizontal":return{x:0,y:r+1};case"horizontalBack":return{x:i-1,y:r};case"vertical":return{x:0,y:r+100};case"verticalUp":return{x:0,y:i-1};case"diagonal":return{x:0,y:r+1};case"diagonalBack":return{x:i-1,y:t>=i-1?r+1:r};case"diagonalUp":return{x:0,y:r<i-1?i-1:r+1};case"diagonalUpBack":return{x:i-1,y:t>=i-1?r+1:r}}}fillPuzzle(e,t){let r,i,n;for(this.curPuzzle=[],r=0;r<t.height;r++)for(this.curPuzzle.push([]),i=0;i<t.width;i++)this.curPuzzle[r].push("");for(r=0,n=e.length;r<n;r++)if(!this.placeWordInPuzzle(this.curPuzzle,t,e[r]))return null;return this.curPuzzle}placeWordInPuzzle(e,t,r){let i=this.findBestLocations(e,t,r);if(0===i.length)return!1;let n=i[Math.floor(Math.random()*i.length)];return this.placeWord(e,r,n.x,n.y,n.orientation),!0}findBestLocations(e,t,r){let i=[],n=t.height,s=t.width,a=r.length,l=0;for(let u=0,h=t.orientations.length;u<h;u++){let h=t.orientations[u],c=0,d=0;for(;d<n;)if(this.checkOrientations(h,c,d,n,s,a)){var o=this.calcOverlap(r,e,c,d,h);(o>=l||!t.preferOverlap&&o>-1)&&(l=o,i.push({x:c,y:d,orientation:h,overlap:o})),++c>=s&&(c=0,d++)}else{let e=this.skipOrientations(h,c,d,a);c=e.x,d=e.y}}return t.preferOverlap?this.pruneLocations(i,l):i}calcOverlap(e,t,r,i,n){let s=0;for(let o=0,u=e.length;o<u;o++){var a=this.compOrientations(n,r,i,o),l=t[a.y][a.x];if(l===e[o])s++;else if(""!==l)return-1}return s}pruneLocations(e,t){var r=[];for(let i=0,n=e.length;i<n;i++)e[i].overlap>=t&&r.push(e[i]);return r}placeWord(e,t,r,i,n){for(let s=0,a=t.length;s<a;s++){let a=this.compOrientations(n,r,i,s);e[a.y][a.x]=t[s]}}setLetters(e=this.opts.lang){switch(e){case"EN":case"ES":return"abcdefghijklmnoprstuvwy";case"FR":return"abcdefghijklmnoprstuvwyéàèùâêîôûçëïü";case"IT":return"abcdefghijklmnoprstuvwyàèéìòóù";case"DE":return"abcdefghijklmnoprstuvwyäöüß";case"JA":return"アカサタナイキシチニウクスツヌエケセテネオコソトノハマヤラワヒミリヰフムユルンヘメレヱホモヨロヲガザダバパギジヂビピグズヅブプゲゼデベペゴゾドボポ";case"ZH":return"安吧爸八百北不大岛的弟地东都对多儿二方港哥个关贵国过海好很会家见叫姐京九可老李零六吗妈么没美妹们明名哪那南你您朋七起千去人认日三上谁什生师识十是四他她台天湾万王我五西息系先香想小谢姓休学也一亿英友月再张这中字";case"HI":return"अआएईऍऎऐइओऑऒऊऔउबभचछडढफफ़गघग़हजझकखख़लळऌऴॡमनङञणऩॐपक़रऋॠऱसशषटतठदथधड़ढ़वयय़ज़";case"ID":return"abcdefghijklmnoprstuvwy";case"NL":return"abcdefghijklmnoprstuvwyáéíóúàèëïöüĳ";case"PL":return"abcdefghijklmnoprstuvwyąćęłńóśżź";case"PT":return"abcdefghijklmnoprstuvwyàáâãçéêíóôõú";case"RU":return"абвгдеёжзийклмнопрстуфхцчшщъыьэюя";case"KO":return"ㄱㄴㄷㄹㅁㅂㅅㅇㅈㅊㅋㅌㅍㅎㅏㅓㅗㅜㅡㅣㅑㅕㅛㅠㄲㄸㅃㅆㅉㄳㄵㄶㄺㄻㄼㄽㄾㄿㅀㅄㅐㅒㅔㅖㅢㅘㅙㅚㅝㅞㅟ";default:return console.warn("Language not recognized, falling back to English"),"abcdefghijklmnoprstuvwy"}}newPuzzle(e=this.wordList,t=this.opts){for(;!this.curPuzzle;){for(;!this.curPuzzle&&this.attempts++<t.maxAttempts;)this.curPuzzle=this.fillPuzzle(e,t);if(!this.curPuzzle){if(this.gridGrowths++,this.gridGrowths>t.maxGridGrowth)throw new Error(`No valid ${t.width}x${t.height} grid found and not allowed to grow more`);console.log(`No valid ${t.width}x${t.height} grid found after ${this.attempts-1} attempts, trying with bigger grid`),t.height++,t.width++,this.attempts=0}}if(t.fillBlanks)for(let e=0,t=this.curPuzzle.length;e<t;e++)for(let t=0,r=this.curPuzzle[e].length;t<r;t++)""==this.curPuzzle[e][t]&&(this.curPuzzle[e][t]=this.lettersSet[Math.floor(Math.random()*this.lettersSet.length)]);return t.debug&&this.print(this.curPuzzle),this.curPuzzle}newPuzzleLax(e,t){try{return this.newPuzzle(e,t)}catch(n){if(!t.allowedMissingWords)throw n;(t=Object.assign({},t)).allowedMissingWords--;for(var r=0;r<e.length;r++){var i=e.slice(0);i.splice(r,1);try{return this.curPuzzle=this.newPuzzleLax(i,t),console.log(`Solution found without word "${e[r]}"`),this.curPuzzle}catch(e){}}throw n}}solve(e,t){for(var r={height:e.length,width:e[0].length,orientations:this.orientations,preferOverlap:!0},i=[],n=[],s=0,a=t.length;s<a;s++){let a=t[s],l=this.findBestLocations(e,r,a);l.length>0&&l[0].overlap===a.length?(l[0].word=a,i.push(l[0])):n.push(a)}return{found:i,notFound:n}}print(e){let t="";for(var r=0,i=e.length;r<i;r++){for(var n=e[r],s=0,a=n.length;s<a;s++)t+=(""===n[s]?" ":n[s])+" ";t+="\n"}return console.log(t),t}drawPuzzle(e=this.domElem,t=this.finalPuzzle){for(;e.firstChild;)e.removeChild(e.firstChild);for(var r=0,i=t.length;r<i;r++){let i=document.createElement("div");for(var n=t[r],s=0,a=n.length;s<a;s++){let e=document.createElement("button");e.classList.add("puzzleSquare"),e.setAttribute("x",s),e.setAttribute("y",r);let t=document.createTextNode(n[s]||"&nbsp;");e.appendChild(t),i.appendChild(e)}e.appendChild(i)}}calcOrientation(e,t,r,i){for(let n=0;n<this.orientations.length;n++){let s=this.compOrientations(this.orientations[n],e,t,1);return s.x===r&&s.y===i?this.orientations[n]:null}}startTurn(e){let t=e.target;t.classList.add("selected"),this.startSquare=t,this.selectedSquares.push(t),this.curWord=t.innerText}mouseMove(e){let t=e.target;this.selectSquare(t)}touchMove(e){let t=e.touches[0].pageX,r=e.touches[0].pageY,i=document.elementFromPoint(t,r);this.selectSquare(i)}selectSquare(e){let t=this.selectedSquares[this.selectedSquares.length-1];if(this.startSquare&&e!==this.startSquare){let r=this.calcOrientation(t.getAttribute("x"),t.getAttribute("y"),e.getAttribute("x"),e.getAttribute("y"));""==this.curOrientation||this.curOrientation==r?this.playTurn(e):this.endTurn()}}playTurn(e){for(var t=0,r=this.wordList.length;t<r;t++)0===this.wordList[t].toUpperCase().indexOf(this.curWord.toUpperCase()+e.innerText.toUpperCase())&&(e.classList.add("selected"),this.selectedSquares.push(e),this.curWord+=e.innerText)}endTurn(){for(let e=0;e<this.wordList.length;e++){if(this.wordList[e].toUpperCase()===this.curWord.toUpperCase()){let t=document.querySelectorAll(".selected");[].forEach.call(t,e=>{e.classList.add("found")}),this.wordList.splice(e,1)}if(0===this.wordList.length){let e=document.querySelectorAll(".puzzleSquare");[].forEach.call(e,e=>{e.classList.add("complete")})}}let e=document.querySelectorAll(".selected");[].forEach.call(e,e=>{e.classList.remove("selected")}),this.startSquare=null,this.lastSquare=null,this.selectedSquares=[],this.curWord="",this.curOrientation=null}setEventHandlers(e=this.domElem){if(window.navigator.msPointerEnabled){let t=e.querySelectorAll(".puzzleSquare");[].forEach.call(t,e=>{e.addEventListener("MSPointerDown",this.startTurn.bind(this)),e.addEventListener("MSPointerOver",this.selectSquare.bind(this)),e.addEventListener("MSPointerUp",this.endTurn.bind(this))})}else{let t=e.querySelectorAll(".puzzleSquare");[].forEach.call(t,e=>{e.addEventListener("mousedown",this.startTurn.bind(this)),e.addEventListener("mouseenter",this.mouseMove.bind(this)),e.addEventListener("mouseup",this.endTurn.bind(this)),e.addEventListener("touchstart",this.startTurn.bind(this)),e.addEventListener("touchmove",this.touchMove.bind(this)),e.addEventListener("touchend",this.endTurn.bind(this))})}}};console.warn("I am self aware");new i(["amour","avis","bien-être","bonheur","club","connaissance","convention","culture","développement","écrire","éducation","égalité","enfant","épanouissement","états","expression","famille","femme","harmonie","homme","humanité","idéaux","justice","liberté","loisirs","manifester","mineur","opinion","paix","parent","presse","principe","protection","religion","respect","santé","universel","vie"],document.querySelector("#wordsgame"),{lang:"FR",orientations:["horizontal","vertical"],maxGridGrowth:50,preferOverlap:!1});document.querySelector("#incoweb").addEventListener("click",()=>{window.open("http://incoweb.playbac.fr/indexhtml.php5?livret=74","EVENTAIL_PLAYBAC","height=700, width=900, toolbar=no, menubar=no, scrollbars=yes, resizable=no, location=no, directories=no, status=no")})}]);