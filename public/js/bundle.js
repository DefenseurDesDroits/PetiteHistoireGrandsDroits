!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var i=class{constructor(t,e,r={}){if(!t.length)throw new Error("No words provided");this.attempts=0,this.gridGrowths=0,this.domElem=e,this.allOrientations=["horizontal","horizontalBack","vertical","verticalUp","diagonal","diagonalUp","diagonalBack","diagonalUpBack"],this.orientations=r.orientations||allOrientations,this.wordList=t.slice(0).sort();let i=this.wordList[0].length;this.opts={lang:r.lang||"EN",height:r.height||i,width:r.width||i,orientations:this.orientations,fillBlanks:void 0===r.fillBlanks||r.fillBlanks,allowExtraBlanks:void 0===r.allowExtraBlanks||r.allowExtraBlanks,maxAttempts:r.maxAttempts||3,maxGridGrowth:void 0!==r.maxGridGrowth?r.maxGridGrowth:10,preferOverlap:void 0===r.preferOverlap||r.preferOverlap,debug:void 0!==r.debug&&r.debug},this.lettersSet=this.setLetters(this.opts.lang),this.startSquare=null,this.lastSquare=null,this.selectedSquares=[],this.curWord="",this.curOrientation=null,this.finalPuzzle=this.newPuzzle(),this.drawPuzzle(),this.setEventHandlers()}compOrientations(t,e,r,i){switch(t){case"horizontal":return{x:e+i,y:r};case"horizontalBack":return{x:e-i,y:r};case"vertical":return{x:e,y:r+i};case"verticalUp":return{x:e,y:r-i};case"diagonal":return{x:e+i,y:r+i};case"diagonalBack":return{x:e-i,y:r+i};case"diagonalUp":return{x:e+i,y:r-i};case"diagonalUpBack":return{x:e-i,y:r-i}}}checkOrientations(t,e,r,i,n,s){switch(t){case"horizontal":return n>=e+s;case"horizontalBack":return e+1>=s;case"vertical":return i>=r+s;case"verticalUp":return r+1>=s;case"diagonal":return n>=e+s&&i>=r+s;case"diagonalBack":return e+1>=s&&i>=r+s;case"diagonalUp":return n>=e+s&&r+1>=s;case"diagonalUpBack":return e+1>=s&&r+1>=s}}skipOrientations(t,e,r,i){switch(t){case"horizontal":return{x:0,y:r+1};case"horizontalBack":return{x:i-1,y:r};case"vertical":return{x:0,y:r+100};case"verticalUp":return{x:0,y:i-1};case"diagonal":return{x:0,y:r+1};case"diagonalBack":return{x:i-1,y:e>=i-1?r+1:r};case"diagonalUp":return{x:0,y:r<i-1?i-1:r+1};case"diagonalUpBack":return{x:i-1,y:e>=i-1?r+1:r}}}fillPuzzle(t,e){let r,i,n;for(this.curPuzzle=[],r=0;r<e.height;r++)for(this.curPuzzle.push([]),i=0;i<e.width;i++)this.curPuzzle[r].push("");for(r=0,n=t.length;r<n;r++)if(!this.placeWordInPuzzle(this.curPuzzle,e,t[r]))return null;return this.curPuzzle}placeWordInPuzzle(t,e,r){let i=this.findBestLocations(t,e,r);if(0===i.length)return!1;let n=i[Math.floor(Math.random()*i.length)];return this.placeWord(t,r,n.x,n.y,n.orientation),!0}findBestLocations(t,e,r){let i=[],n=e.height,s=e.width,a=r.length,l=0;for(let u=0,h=e.orientations.length;u<h;u++){let h=e.orientations[u],c=0,d=0;for(;d<n;)if(this.checkOrientations(h,c,d,n,s,a)){var o=this.calcOverlap(r,t,c,d,h);(o>=l||!e.preferOverlap&&o>-1)&&(l=o,i.push({x:c,y:d,orientation:h,overlap:o})),++c>=s&&(c=0,d++)}else{let t=this.skipOrientations(h,c,d,a);c=t.x,d=t.y}}return e.preferOverlap?this.pruneLocations(i,l):i}calcOverlap(t,e,r,i,n){let s=0;for(let o=0,u=t.length;o<u;o++){var a=this.compOrientations(n,r,i,o),l=e[a.y][a.x];if(l===t[o])s++;else if(""!==l)return-1}return s}pruneLocations(t,e){var r=[];for(let i=0,n=t.length;i<n;i++)t[i].overlap>=e&&r.push(t[i]);return r}placeWord(t,e,r,i,n){for(let s=0,a=e.length;s<a;s++){let a=this.compOrientations(n,r,i,s);t[a.y][a.x]=e[s]}}setLetters(t=this.opts.lang){switch(t){case"EN":case"ES":return"abcdefghijklmnoprstuvwy";case"FR":return"abcdefghijklmnoprstuvwyéàèùâêîôûçëïü";case"IT":return"abcdefghijklmnoprstuvwyàèéìòóù";case"DE":return"abcdefghijklmnoprstuvwyäöüß";case"JA":return"アカサタナイキシチニウクスツヌエケセテネオコソトノハマヤラワヒミリヰフムユルンヘメレヱホモヨロヲガザダバパギジヂビピグズヅブプゲゼデベペゴゾドボポ";case"ZH":return"安吧爸八百北不大岛的弟地东都对多儿二方港哥个关贵国过海好很会家见叫姐京九可老李零六吗妈么没美妹们明名哪那南你您朋七起千去人认日三上谁什生师识十是四他她台天湾万王我五西息系先香想小谢姓休学也一亿英友月再张这中字";case"HI":return"अआएईऍऎऐइओऑऒऊऔउबभचछडढफफ़गघग़हजझकखख़लळऌऴॡमनङञणऩॐपक़रऋॠऱसशषटतठदथधड़ढ़वयय़ज़";case"ID":return"abcdefghijklmnoprstuvwy";case"NL":return"abcdefghijklmnoprstuvwyáéíóúàèëïöüĳ";case"PL":return"abcdefghijklmnoprstuvwyąćęłńóśżź";case"PT":return"abcdefghijklmnoprstuvwyàáâãçéêíóôõú";case"RU":return"абвгдеёжзийклмнопрстуфхцчшщъыьэюя";case"KO":return"ㄱㄴㄷㄹㅁㅂㅅㅇㅈㅊㅋㅌㅍㅎㅏㅓㅗㅜㅡㅣㅑㅕㅛㅠㄲㄸㅃㅆㅉㄳㄵㄶㄺㄻㄼㄽㄾㄿㅀㅄㅐㅒㅔㅖㅢㅘㅙㅚㅝㅞㅟ";default:return console.warn("Language not recognized, falling back to English"),"abcdefghijklmnoprstuvwy"}}newPuzzle(t=this.wordList,e=this.opts){for(;!this.curPuzzle;){for(;!this.curPuzzle&&this.attempts++<e.maxAttempts;)this.curPuzzle=this.fillPuzzle(t,e);if(!this.curPuzzle){if(this.gridGrowths++,this.gridGrowths>e.maxGridGrowth)throw new Error(`No valid ${e.width}x${e.height} grid found and not allowed to grow more`);console.log(`No valid ${e.width}x${e.height} grid found after ${this.attempts-1} attempts, trying with bigger grid`),e.height++,e.width++,this.attempts=0}}if(e.fillBlanks)for(let t=0,e=this.curPuzzle.length;t<e;t++)for(let e=0,r=this.curPuzzle[t].length;e<r;e++)""==this.curPuzzle[t][e]&&(this.curPuzzle[t][e]=this.lettersSet[Math.floor(Math.random()*this.lettersSet.length)]);return e.debug&&this.print(this.curPuzzle),this.curPuzzle}newPuzzleLax(t,e){try{return this.newPuzzle(t,e)}catch(n){if(!e.allowedMissingWords)throw n;(e=Object.assign({},e)).allowedMissingWords--;for(var r=0;r<t.length;r++){var i=t.slice(0);i.splice(r,1);try{return this.curPuzzle=this.newPuzzleLax(i,e),console.log(`Solution found without word "${t[r]}"`),this.curPuzzle}catch(t){}}throw n}}solve(t,e){for(var r={height:t.length,width:t[0].length,orientations:this.orientations,preferOverlap:!0},i=[],n=[],s=0,a=e.length;s<a;s++){let a=e[s],l=this.findBestLocations(t,r,a);l.length>0&&l[0].overlap===a.length?(l[0].word=a,i.push(l[0])):n.push(a)}return{found:i,notFound:n}}print(t){let e="";for(var r=0,i=t.length;r<i;r++){for(var n=t[r],s=0,a=n.length;s<a;s++)e+=(""===n[s]?" ":n[s])+" ";e+="\n"}return console.log(e),e}drawPuzzle(t=this.domElem,e=this.finalPuzzle){for(;t.firstChild;)t.removeChild(t.firstChild);for(var r=0,i=e.length;r<i;r++){let i=document.createElement("div");for(var n=e[r],s=0,a=n.length;s<a;s++){let t=document.createElement("button");t.classList.add("puzzleSquare"),t.setAttribute("x",s),t.setAttribute("y",r);let e=document.createTextNode(n[s]||"&nbsp;");t.appendChild(e),i.appendChild(t)}t.appendChild(i)}}calcOrientation(t,e,r,i){for(let n=0;n<this.orientations.length;n++){let s=this.compOrientations(this.orientations[n],t,e,1);return s.x===r&&s.y===i?this.orientations[n]:null}}startTurn(t){let e=t.target;e.classList.add("selected"),this.startSquare=e,this.selectedSquares.push(e),this.curWord=e.innerText}mouseMove(t){let e=t.target;this.selectSquare(e)}touchMove(t){let e=t.touches[0].pageX,r=t.touches[0].pageY,i=document.elementFromPoint(e,r);this.selectSquare(i)}selectSquare(t){let e=this.selectedSquares[this.selectedSquares.length-1];if(this.startSquare&&t!==this.startSquare){let r=this.calcOrientation(e.getAttribute("x"),e.getAttribute("y"),t.getAttribute("x"),t.getAttribute("y"));""==this.curOrientation||this.curOrientation==r?this.playTurn(t):this.endTurn()}}playTurn(t){for(var e=0,r=this.wordList.length;e<r;e++)0===this.wordList[e].toUpperCase().indexOf(this.curWord.toUpperCase()+t.innerText.toUpperCase())&&(t.classList.add("selected"),this.selectedSquares.push(t),this.curWord+=t.innerText)}endTurn(){for(let t=0;t<this.wordList.length;t++){if(this.wordList[t].toUpperCase()===this.curWord.toUpperCase()){let e=document.querySelectorAll(".selected");[].forEach.call(e,t=>{t.classList.add("found")}),this.wordList.splice(t,1)}if(0===this.wordList.length){let t=document.querySelectorAll(".puzzleSquare");[].forEach.call(t,t=>{t.classList.add("complete")})}}let t=document.querySelectorAll(".selected");[].forEach.call(t,t=>{t.classList.remove("selected")}),this.startSquare=null,this.lastSquare=null,this.selectedSquares=[],this.curWord="",this.curOrientation=null}setEventHandlers(t=this.domElem){if(window.navigator.msPointerEnabled){let e=t.querySelectorAll(".puzzleSquare");[].forEach.call(e,t=>{t.addEventListener("MSPointerDown",this.startTurn.bind(this)),t.addEventListener("MSPointerOver",this.selectSquare.bind(this)),t.addEventListener("MSPointerUp",this.endTurn.bind(this))})}else{let e=t.querySelectorAll(".puzzleSquare");[].forEach.call(e,t=>{t.addEventListener("mousedown",this.startTurn.bind(this)),t.addEventListener("mouseenter",this.mouseMove.bind(this)),t.addEventListener("mouseup",this.endTurn.bind(this)),t.addEventListener("touchstart",this.startTurn.bind(this)),t.addEventListener("touchmove",this.touchMove.bind(this)),t.addEventListener("touchend",this.endTurn.bind(this))})}}};console.warn("I am self aware");new i(["amour","avis","bien-être","bonheur","club","connaissance","convention","culture","développement","écrire","éducation","égalité","enfant","épanouissement","états","expression","famille","femme","harmonie","homme","humanité","idéaux","justice","liberté","loisirs","manifester","mineur","opinion","paix","parent","presse","principe","protection","religion","respect","santé","universel","vie"],document.querySelector("#wordsgame"),{lang:"FR",orientations:["horizontal","vertical"],height:20,width:25,maxAttempts:100,preferOverlap:!1});document.querySelector("#incoweb").addEventListener("click",()=>{window.open("http://incoweb.playbac.fr/indexhtml.php5?livret=74","EVENTAIL_PLAYBAC","height=700, width=900, toolbar=no, menubar=no, scrollbars=yes, resizable=no, location=no, directories=no, status=no")})}]);